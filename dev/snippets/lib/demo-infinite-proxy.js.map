{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/demo-infinite-proxy.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n#===========================================================================================================\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'demo-proxy'\n{ rpr\n  inspect\n  echo\n  white\n  blue\n  gold\n  grey\n  red\n  bold\n  reverse\n  log     }               = GUY.trm\n{ f }                     = require '../../../apps/effstring'\nwrite                     = ( p ) -> process.stdout.write p\nC                         = require 'ansis'\n{ nfa }                   = require '../../../apps/normalize-function-arguments'\nGTNG                      = require '../../../apps/guy-test-NG'\n{ Test                  } = GTNG\n\nwarn 'Ω___1', reverse \" superseded by `(test-)single-file-proxy.coffee` \"\n\n#===========================================================================================================\ndemo_infinite_proxy = ->\n  stack     = []\n  get_proxy = Symbol 'get_proxy'\n  #.........................................................................................................\n  template =\n    base:                     null\n    is_initial:               true\n    empty_stack_on_new_chain: true\n  #.........................................................................................................\n  new_infiniproxy = nfa { template, }, ( base, is_initial, cfg ) ->\n    is_initial = false unless cfg.empty_stack_on_new_chain\n    proxy = new Proxy base,\n      get: ( target, key ) ->\n        return new_infiniproxy { base, is_initial: false, } if key is get_proxy\n        return target[ key ] if ( typeof key ) is 'symbol'\n        stack.length = 0 if is_initial\n        stack.push key\n        return R\n    if is_initial then  R = new_infiniproxy { base, is_initial: false, }\n    else                R = proxy\n    return proxy\n  #.........................................................................................................\n  base = ( P... ) ->\n    R = \"#{stack.join '.'}::#{rpr P}\"\n    stack.length = 0\n    return R\n  #.........................................................................................................\n  ### These calls will be `stack`ed but then get thrown away as soon as any property of `p` is used: ###\n  do =>\n    echo '——————————————————————————————————————————————————————————————————————————————'\n    p = new_infiniproxy base, { empty_stack_on_new_chain: true } ### default ###\n    p.ooops;  debug 'Ω___2', stack\n    p.wat;    debug 'Ω___3', stack\n    p.nö;     debug 'Ω___4', stack\n    info 'Ω___5', p.more_of_this\"some text\"\n    debug 'Ω___6', stack\n    return null\n  #.........................................................................................................\n  ### These calls will be `stack`ed and remain on the stack until `p` is called: ###\n  do =>\n    echo '——————————————————————————————————————————————————————————————————————————————'\n    p = new_infiniproxy base, { empty_stack_on_new_chain: false } ### opt-in ###\n    p.ooops;  debug 'Ω___7', stack\n    p.wat;    debug 'Ω___8', stack\n    p.nö;     debug 'Ω___9', stack\n    info 'Ω__10', p.more_of_this\"some text\"\n    debug 'Ω__11', stack\n    return null\n  #.........................................................................................................\n  do =>\n    echo '——————————————————————————————————————————————————————————————————————————————'\n    p = new_infiniproxy base\n    info 'Ω__12', p.red.bold.underline\"some text\"\n    ### Some random property retrievals without call... ###\n    p.bold.underline\n    p.strikethrough.inverse\n    ### ...won't influence the meaning of the next property chain: ###\n    info 'Ω__13', p.yellow\"finally, a call\"\n    ### But if needed, can always reference a proxy from an intermediate result and build a property chain\n    on that; here we used a special unique value `get_proxy` that produces an intermediate result *without*\n    adding it to the property chain: ###\n    proxy = p[ get_proxy ]\n    ### Imagine we go through some branching if/then clauses to decide whether to add some styles: ###\n    proxy.bold.underline\n    proxy.strikethrough\n    proxy.inverse\n    proxy.yellow\n    ### Finally, we're ready to print: ###\n    info 'Ω__14', proxy\"this will be printed in bold + underline + strikethrough + inverse + yellow\"\n    return null\n  return null\n\n# #===========================================================================================================\n# demo_picocolors_chalk = ->\n#   do =>\n#     # info 'Ω__15',     C.yellow\"█▒█\"\n#     # info 'Ω__16',     C.yellow\"█#{ C.green\"▒\" }█\"\n#     info 'Ω__17',     C.red\"█#{    C.green\"▒\" }█#{ C.green 'GREEN' }###\"\n#     # info 'Ω__18', rpr C.yellow\"█▒█\"\n#     # info 'Ω__19', rpr C.yellow\"█#{ C.green\"▒\" }█\"\n#     info 'Ω__20', rpr C.red\"█#{    C.green\"▒\" }█#{ C.green 'GREEN' }###\"\n#     info 'Ω__21',     C.red\"████#{C.green\"████#{C.yellow\"████\"}████\"}████\"\n#     info 'Ω__22', rpr C.red\"████#{C.green\"████#{C.yellow\"████\"}████\"}████\"\n#     return null\n#   do =>\n#     #-----------------------------------------------------------------------------------------------------------\n#     color_codes =\n#       red:    '\\x1B[31m'\n#       green:  '\\x1B[32m'\n#       yellow: '\\x1B[33m'\n#     color_off = '\\x1B[39m'\n#     #.......................................................................................................\n#     colorizer_from_color_code = ( color_code ) ->\n#       R = ( parts, expressions... ) ->\n#         R = color_code + parts[ 0 ]\n#         for expression, idx in expressions\n#           inner = expression.toString().replace /\\x1B\\[39m$/, ''\n#           R += ( inner ) + ( color_code + parts[ idx + 1 ] )\n#         return R + color_off\n#       return R\n#     #.......................................................................................................\n#     red     = colorizer_from_color_code color_codes.red\n#     green   = colorizer_from_color_code color_codes.green\n#     yellow  = colorizer_from_color_code color_codes.yellow\n#     # info 'Ω__23',     red\"█#{'▒'}█#{ 'GREEN' }###\"\n#     # info 'Ω__24', rpr red\"█#{'▒'}█#{ 'GREEN' }###\"\n#     info 'Ω__25',     red\"████#{green\"████#{yellow\"████\"}████\"}████\"\n#     info 'Ω__26', rpr red\"████#{green\"████#{yellow\"████\"}████\"}████\"\n#     return null\n#   return null\n\n#===========================================================================================================\ndemo_colorful_proxy = ->\n  class TMP_error extends Error\n  stack = []\n  #.........................................................................................................\n  template =\n    bearer:       null\n    base:         null\n    is_initial:   false\n  #.........................................................................................................\n  new_infiniproxy = nfa { template, }, ( bearer, base, is_initial, cfg ) ->\n    proxy = new Proxy base,\n      get: ( target, key ) ->\n        return target[ key ] if ( typeof key ) is 'symbol'\n        unless Reflect.has bearer, key\n          throw new TMP_error \"Ω__27 unknown key #{rpr key}\"\n        stack.length = 0 if is_initial\n        stack.push key\n        return R\n    if is_initial then  R = new_infiniproxy { bearer, base, is_initial: false, }\n    else                R = proxy\n    return proxy\n  #.........................................................................................................\n  base = ( P... ) ->\n    R = P[ 0 ]\n    while stack.length > 0\n      key = stack.pop()\n      R   = C[ key ] R\n    return R\n  #.........................................................................................................\n  p = new_infiniproxy C, base, { is_initial: true, }\n  info 'Ω__28', p.green.bold.inverse \" holy moly \"\n  #.........................................................................................................\n  info 'Ω__29', p.yellow.italic\"some text\"\n  info 'Ω__30', p.green.bold.inverse.underline\"some text\"\n  ### Building the chain: ###\n  chain = p.cyan.bold\n  chain.underline\n  info 'Ω__31', p \"finally, a call\"\n  return null\n\n\n#===========================================================================================================\nif module is require.main then await do =>\n  # demo_infinite_proxy()\n  # demo_colorful_proxy()\n  guytest_cfg = { throw_on_error: false,  show_passes: false, report_checks: false, }\n  guytest_cfg = { throw_on_error: true,   show_passes: false, report_checks: false, }\n  ( new Test guytest_cfg ).test { demo_proxy_as_html_producer, }\n  #.........................................................................................................\n  demo_infinite_proxy()\n  demo_colorful_proxy()\n  warn 'Ω__52', reverse \" superseded by `(test-)single-file-proxy.coffee` \"\n  process.exit 111\n"
  ]
}