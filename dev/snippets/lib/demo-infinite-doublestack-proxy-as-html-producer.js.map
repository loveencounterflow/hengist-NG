{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/demo-infinite-doublestack-proxy-as-html-producer.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n\n'use strict'\n\n#===========================================================================================================\nGUY                       = require 'guy'\n{ alert\n  debug\n  help\n  info\n  plain\n  praise\n  urge\n  warn\n  whisper }               = GUY.trm.get_loggers 'demo-proxy'\n{ rpr\n  inspect\n  echo\n  white\n  blue\n  gold\n  grey\n  red\n  bold\n  reverse\n  log     }               = GUY.trm\n{ f }                     = require '../../../apps/effstring'\n# write                     = ( p ) -> process.stdout.write p\n{ nfa }                   = require '../../../apps/normalize-function-arguments'\nGTNG                      = require '../../../apps/guy-test-NG'\n{ Test                  } = GTNG\n\n\n\n############################################################################################################\n#\n#===========================================================================================================\n### NOTE Future Single-File Module ###\nrequire_list_utils = ->\n  append = ( list, P... ) -> list.splice list.length, 0, P...\n  return { append, }\n\n#-----------------------------------------------------------------------------------------------------------\n### NOTE Future Single-File Module ###\nrequire_escape_html_text = ->\n  escape_html_text = ( text ) ->\n    R = text\n    R = R.replace /&/g, '&amp;'\n    R = R.replace /</g, '&lt;'\n    R = R.replace />/g, '&gt;'\n    return R\n  return { escape_html_text, }\n\n#-----------------------------------------------------------------------------------------------------------\n### NOTE Future Single-File Module ###\nrequire_text_from_tagged_template_call = ->\n  ### NOTE When `expression_to_string` is given, it will be used to turn each expression (the parts of\n  tagged templates that are within curlies) into a string; could use this to apply some escaping etc. ###\n  ### TAINT should provide means to also format constant parts ###\n  create_text_from_tagged_template_call = ( expression_to_string = null ) ->\n    expression_to_string ?= ( expression ) -> \"#{expression}\"\n    return ( parts, expressions... ) ->\n      R = parts[ 0 ]\n      for expression, idx in expressions\n        R += ( expression_to_string expression ) + parts[ idx + 1 ]\n      return R\n  text_from_tagged_template_call = create_text_from_tagged_template_call()\n  return { create_text_from_tagged_template_call, text_from_tagged_template_call, }\n\n#-----------------------------------------------------------------------------------------------------------\n### NOTE Future Single-File Module ###\nrequire_is_tagged_template_call = ->\n  is_tagged_template_call = ( P... ) ->\n    return false unless Array.isArray   P[ 0 ]\n    return false unless Object.isFrozen P[ 0 ]\n    return false unless P[ 0 ].raw?\n    return true\n  return { is_tagged_template_call, }\n\n\n############################################################################################################\n#\n#===========================================================================================================\nclass Raw\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( text ) ->\n    @data = text\n    return undefined\n  toString: -> @data\n\n#-----------------------------------------------------------------------------------------------------------\nclass Stack\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ->\n    @data = []\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  push:     ( x ) -> @data.push x; null\n  unshift:  ( x ) -> @data.unshift x; null\n  #---------------------------------------------------------------------------------------------------------\n  pop:   ( fallback = misfit ) ->\n  shift: ( fallback = misfit ) ->\n  peek:  ( fallback = misfit ) ->\n\n#-----------------------------------------------------------------------------------------------------------\nclass Doublestack\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ->\n    @stacks = []\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  push_new_stack:     -> @stacks.push    []; null\n  # unshift_new_stack:  -> @stacks.unshift []; null\n  #---------------------------------------------------------------------------------------------------------\n  pop_old_stack:    ( fallback = misfit ) ->\n  shift_old_stack:  ( fallback = misfit ) ->\n  peek_stack:       ( fallback = misfit ) -> @stacks.at -1\n\n  stackofstacks     = []\n  get_stack         = -> stackofstacks.at -1\n  push_new_stack    = -> stackofstacks.push []; get_stack()\n  pop_old_stack     = -> stackofstacks.pop()\n  get_stack_length  = -> stackofstacks.length\n\n#-----------------------------------------------------------------------------------------------------------\ncreate_html_escaped_text_from_tagged_template_call = ( dont_escape = null ) ->\n  ### NOTE will only escape *expressions* of tagged templates, not the constant parts ###\n  { create_text_from_tagged_template_call,  } = require_text_from_tagged_template_call()\n  { escape_html_text,                       } = require_escape_html_text()\n  #.........................................................................................................\n  html_safe_text_from_tagged_template_call = create_text_from_tagged_template_call ( expression ) ->\n    R = \"#{expression}\"\n    if dont_escape?\n      R = escape_html_text R unless dont_escape expression\n    return R\n  #.........................................................................................................\n  return { html_safe_text_from_tagged_template_call, }\n\n\n#===========================================================================================================\ntests = ->\n  { is_tagged_template_call,                  } = require_is_tagged_template_call()\n  { html_safe_text_from_tagged_template_call, } = do =>\n    dont_escape_raw_instances = ( x ) -> x instanceof Raw\n    return create_html_escaped_text_from_tagged_template_call dont_escape_raw_instances\n  #.........................................................................................................\n  do test_is_tagged_template_call = =>\n    fn = ( P... ) -> is_tagged_template_call P...\n    @eq ( Ωidsp___1 = -> fn()             ), false\n    @eq ( Ωidsp___2 = -> fn [ 1, 2, 3, ]  ), false\n    @eq ( Ωidsp___3 = -> fn\"[ 1, 2, 3, ]\" ), true\n    return null\n  #.........................................................................................................\n  do test_escape_html_text = =>\n    { escape_html_text, } = require_escape_html_text()\n    @eq ( Ωidsp___4 = -> escape_html_text ''                    ), ''\n    @eq ( Ωidsp___5 = -> escape_html_text 'abc'                 ), 'abc'\n    @eq ( Ωidsp___6 = -> escape_html_text 'abc<tag>d&e&f</tag>' ), 'abc&lt;tag&gt;d&amp;e&amp;f&lt;/tag&gt;'\n    return null\n  #.........................................................................................................\n  do test_html_safe_text_from_tagged_template_call = =>\n    fn = html_safe_text_from_tagged_template_call\n    @eq ( Ωidsp___7 = -> fn''                           ), ''\n    @eq ( Ωidsp___8 = -> fn'abc'                        ), 'abc'\n    @eq ( Ωidsp___9 = -> fn'abc<tag>d&e&f</tag>'        ), 'abc<tag>d&e&f</tag>'\n    @eq ( Ωidsp__10 = -> fn\"(#{'abc<tag>d&e&f</tag>'})\" ), '(abc&lt;tag&gt;d&amp;e&amp;f&lt;/tag&gt;)'\n    return null\n  #.........................................................................................................\n  return null\n\n#===========================================================================================================\ndemo_proxy_as_html_producer = ->\n  #.........................................................................................................\n  echo '——————————————————————————————————————————————————————————————————————————————'\n  return null\n\n#===========================================================================================================\nif module is require.main then await do =>\n  # demo_infinite_proxy()\n  # demo_colorful_proxy()\n  guytest_cfg = { throw_on_error: false,  show_passes: false, report_checks: false, }\n  guytest_cfg = { throw_on_error: true,   show_passes: false, report_checks: false, }\n  ( new Test guytest_cfg ).test { tests, }\n  demo_proxy_as_html_producer()\n\n"
  ]
}